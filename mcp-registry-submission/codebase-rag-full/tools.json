{
  "tools": [
    {
      "name": "code_graph_ingest_repo",
      "description": "Ingest a code repository into the graph database",
      "inputSchema": {
        "type": "object",
        "properties": {
          "local_path": {"type": "string"},
          "repo_url": {"type": "string"},
          "mode": {"type": "string", "enum": ["full", "incremental"], "default": "incremental"}
        },
        "required": ["local_path"]
      }
    },
    {
      "name": "code_graph_related",
      "description": "Find files related to a query",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": {"type": "string"},
          "repo_id": {"type": "string"},
          "limit": {"type": "integer", "default": 30}
        },
        "required": ["query", "repo_id"]
      }
    },
    {
      "name": "code_graph_impact",
      "description": "Analyze impact of file changes",
      "inputSchema": {
        "type": "object",
        "properties": {
          "repo_id": {"type": "string"},
          "file_path": {"type": "string"},
          "depth": {"type": "integer", "default": 2}
        },
        "required": ["repo_id", "file_path"]
      }
    },
    {
      "name": "context_pack",
      "description": "Build context pack for AI assistants",
      "inputSchema": {
        "type": "object",
        "properties": {
          "repo_id": {"type": "string"},
          "keywords": {"type": "array", "items": {"type": "string"}},
          "budget": {"type": "integer", "default": 8000},
          "stage": {"type": "string", "enum": ["plan", "implement", "review"], "default": "implement"}
        },
        "required": ["repo_id", "keywords"]
      }
    },
    {
      "name": "add_memory",
      "description": "Add a new memory to project knowledge base",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "memory_type": {"type": "string", "enum": ["decision", "preference", "experience", "convention", "plan", "note"]},
          "title": {"type": "string"},
          "content": {"type": "string"},
          "reason": {"type": "string"},
          "importance": {"type": "number", "minimum": 0, "maximum": 1, "default": 0.5},
          "tags": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["project_id", "memory_type", "title", "content"]
      }
    },
    {
      "name": "search_memories",
      "description": "Search project memories using vector similarity",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "query": {"type": "string"},
          "memory_type": {"type": "string"},
          "min_importance": {"type": "number"},
          "tags": {"type": "array", "items": {"type": "string"}},
          "limit": {"type": "integer", "default": 10}
        },
        "required": ["project_id", "query"]
      }
    },
    {
      "name": "get_memory",
      "description": "Get a specific memory by ID",
      "inputSchema": {
        "type": "object",
        "properties": {"memory_id": {"type": "string"}},
        "required": ["memory_id"]
      }
    },
    {
      "name": "update_memory",
      "description": "Update an existing memory",
      "inputSchema": {
        "type": "object",
        "properties": {
          "memory_id": {"type": "string"},
          "title": {"type": "string"},
          "content": {"type": "string"},
          "reason": {"type": "string"},
          "importance": {"type": "number"},
          "tags": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["memory_id"]
      }
    },
    {
      "name": "delete_memory",
      "description": "Delete a memory (soft delete)",
      "inputSchema": {
        "type": "object",
        "properties": {"memory_id": {"type": "string"}},
        "required": ["memory_id"]
      }
    },
    {
      "name": "supersede_memory",
      "description": "Create a new memory that supersedes an old one",
      "inputSchema": {
        "type": "object",
        "properties": {
          "old_memory_id": {"type": "string"},
          "new_title": {"type": "string"},
          "new_content": {"type": "string"},
          "new_reason": {"type": "string"},
          "new_importance": {"type": "number"}
        },
        "required": ["old_memory_id", "new_title", "new_content"]
      }
    },
    {
      "name": "get_project_summary",
      "description": "Get summary of all memories for a project",
      "inputSchema": {
        "type": "object",
        "properties": {"project_id": {"type": "string"}},
        "required": ["project_id"]
      }
    },
    {
      "name": "extract_from_conversation",
      "description": "Extract memories from AI conversation history using LLM analysis",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "conversation": {"type": "array", "items": {"type": "object"}},
          "auto_save": {"type": "boolean", "default": false}
        },
        "required": ["project_id", "conversation"]
      }
    },
    {
      "name": "extract_from_git_commit",
      "description": "Extract memories from git commit using LLM analysis",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "commit_sha": {"type": "string"},
          "commit_message": {"type": "string"},
          "changed_files": {"type": "array", "items": {"type": "string"}},
          "auto_save": {"type": "boolean", "default": false}
        },
        "required": ["project_id", "commit_message"]
      }
    },
    {
      "name": "extract_from_code_comments",
      "description": "Extract memories from code comments (TODO, FIXME, NOTE, DECISION)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "file_path": {"type": "string"}
        },
        "required": ["project_id", "file_path"]
      }
    },
    {
      "name": "suggest_memory_from_query",
      "description": "Suggest memory from knowledge base Q&A session",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "query": {"type": "string"},
          "answer": {"type": "string"},
          "auto_save": {"type": "boolean", "default": false}
        },
        "required": ["project_id", "query", "answer"]
      }
    },
    {
      "name": "batch_extract_from_repository",
      "description": "Batch extract memories from entire repository (git history + code comments)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {"type": "string"},
          "repo_path": {"type": "string"},
          "max_commits": {"type": "integer", "default": 50},
          "file_patterns": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["project_id", "repo_path"]
      }
    },
    {
      "name": "add_document",
      "description": "Add document to knowledge base (supports large documents via async processing)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "content": {"type": "string"},
          "title": {"type": "string"},
          "metadata": {"type": "object"}
        },
        "required": ["content"]
      }
    },
    {
      "name": "add_file",
      "description": "Add file to knowledge base",
      "inputSchema": {
        "type": "object",
        "properties": {"file_path": {"type": "string"}},
        "required": ["file_path"]
      }
    },
    {
      "name": "add_directory",
      "description": "Add directory to knowledge base (async processing)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "directory_path": {"type": "string"},
          "recursive": {"type": "boolean", "default": true}
        },
        "required": ["directory_path"]
      }
    },
    {
      "name": "query_knowledge",
      "description": "Query knowledge base using Neo4j GraphRAG with multiple modes",
      "inputSchema": {
        "type": "object",
        "properties": {
          "question": {"type": "string"},
          "mode": {"type": "string", "enum": ["hybrid", "graph_only", "vector_only"], "default": "hybrid"}
        },
        "required": ["question"]
      }
    },
    {
      "name": "search_similar_nodes",
      "description": "Search for similar nodes using vector similarity",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": {"type": "string"},
          "top_k": {"type": "integer", "default": 10}
        },
        "required": ["query"]
      }
    },
    {
      "name": "get_task_status",
      "description": "Get status of an async task",
      "inputSchema": {
        "type": "object",
        "properties": {"task_id": {"type": "string"}},
        "required": ["task_id"]
      }
    },
    {
      "name": "watch_task",
      "description": "Monitor task progress until completion (real-time)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_id": {"type": "string"},
          "timeout": {"type": "integer", "default": 300},
          "interval": {"type": "number", "default": 1.0}
        },
        "required": ["task_id"]
      }
    },
    {
      "name": "watch_tasks",
      "description": "Monitor multiple tasks until all complete",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_ids": {"type": "array", "items": {"type": "string"}},
          "timeout": {"type": "integer", "default": 300},
          "interval": {"type": "number", "default": 2.0}
        },
        "required": ["task_ids"]
      }
    },
    {
      "name": "list_tasks",
      "description": "List recent tasks with optional status filter",
      "inputSchema": {
        "type": "object",
        "properties": {
          "status": {"type": "string", "enum": ["pending", "running", "completed", "failed"]},
          "limit": {"type": "integer", "default": 10}
        }
      }
    },
    {
      "name": "cancel_task",
      "description": "Cancel a running task",
      "inputSchema": {
        "type": "object",
        "properties": {"task_id": {"type": "string"}},
        "required": ["task_id"]
      }
    },
    {
      "name": "get_queue_stats",
      "description": "Get task queue statistics",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_graph_schema",
      "description": "Get Neo4j graph schema (node labels and relationships)",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_statistics",
      "description": "Get system statistics (nodes, relationships, etc.)",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "clear_knowledge_base",
      "description": "Clear entire knowledge base (use with caution!)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "confirm": {"type": "boolean", "default": false}
        },
        "required": ["confirm"]
      }
    }
  ]
}
