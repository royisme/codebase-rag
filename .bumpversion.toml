[tool.bumpversion]
# Current version number (automatically read from pyproject.toml)
current_version = "0.7.0"

# Version parsing format (supports major.minor.patch)
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"

# Version serialization format
serialize = ["{major}.{minor}.{patch}"]

# Search and replace format
search = "{current_version}"
replace = "{new_version}"

# Git integration
commit = true
commit_args = ""
tag = true
tag_name = "v{new_version}"
tag_message = "Release version {new_version}"
sign_tags = false

# Allow dirty working directory (if needed)
allow_dirty = false

# Commit message template
message = "chore: bump version from {current_version} to {new_version}"

# List of files whose version numbers need to be updated
[[tool.bumpversion.files]]
filename = "pyproject.toml"
search = 'version = "{current_version}"'
replace = 'version = "{new_version}"'

[[tool.bumpversion.files]]
filename = "src/codebase_rag/__version__.py"
search = '__version__ = "{current_version}"'
replace = '__version__ = "{new_version}"'

# Note: docs/changelog.md is now automatically generated by scripts/generate-changelog.py
# It's called by scripts/bump-version.sh before bump-my-version runs

# Version part definitions
[tool.bumpversion.parts.major]
# Major version starts from 0, increments to any number
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]

[tool.bumpversion.parts.minor]
# Minor version starts from 0, increments to any number
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]

[tool.bumpversion.parts.patch]
# Patch version starts from 0, increments to any number
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]
