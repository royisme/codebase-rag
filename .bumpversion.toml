[tool.bumpversion]
# 当前版本号（自动从 pyproject.toml 读取）
current_version = "0.7.0"

# 版本解析格式（支持 major.minor.patch）
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"

# 版本序列化格式
serialize = ["{major}.{minor}.{patch}"]

# 搜索和替换的格式
search = "{current_version}"
replace = "{new_version}"

# Git 集成
commit = true
commit_args = ""
tag = true
tag_name = "v{new_version}"
tag_message = "Release version {new_version}"
sign_tags = false

# 允许 dirty 工作区（如果需要）
allow_dirty = false

# 提交信息模板
message = "chore: bump version from {current_version} to {new_version}"

# 需要更新版本号的文件列表
[[tool.bumpversion.files]]
filename = "pyproject.toml"
search = 'version = "{current_version}"'
replace = 'version = "{new_version}"'

[[tool.bumpversion.files]]
filename = "src/__version__.py"
search = '__version__ = "{current_version}"'
replace = '__version__ = "{new_version}"'

[[tool.bumpversion.files]]
filename = "docs/changelog.md"
search = "## [Unreleased]"
replace = """## [Unreleased]

## [{new_version}] - {now:%Y-%m-%d}"""

[[tool.bumpversion.files]]
filename = "mkdocs.yml"
search = 'site_name: Code Graph Knowledge System'
replace = 'site_name: Code Graph Knowledge System v{new_version}'
# 注意：这个可选，如果不想在标题显示版本可以删除

# 版本部分定义
[tool.bumpversion.parts.major]
# major 版本从 0 开始，递增到任意数字
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]

[tool.bumpversion.parts.minor]
# minor 版本从 0 开始，递增到任意数字
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]

[tool.bumpversion.parts.patch]
# patch 版本从 0 开始，递增到任意数字
values = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]
